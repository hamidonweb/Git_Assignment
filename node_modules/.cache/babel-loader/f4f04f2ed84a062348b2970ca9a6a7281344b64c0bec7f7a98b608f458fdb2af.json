{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.formatAttributes = formatAttributes;\nexports.formatDOM = formatDOM;\nvar domhandler_1 = require(\"domhandler\");\nvar constants_1 = require(\"./constants\");\n/**\n * Gets case-sensitive tag name.\n *\n * @param tagName - Tag name in lowercase.\n * @returns - Case-sensitive tag name.\n */\nfunction getCaseSensitiveTagName(tagName) {\n  return constants_1.CASE_SENSITIVE_TAG_NAMES_MAP[tagName];\n}\n/**\n * Formats DOM attributes to a hash map.\n *\n * @param attributes - List of attributes.\n * @returns - Map of attribute name to value.\n */\nfunction formatAttributes(attributes) {\n  var map = {};\n  var index = 0;\n  var attributesLength = attributes.length;\n  // `NamedNodeMap` is array-like\n  for (; index < attributesLength; index++) {\n    var attribute = attributes[index];\n    map[attribute.name] = attribute.value;\n  }\n  return map;\n}\n/**\n * Corrects the tag name if it is case-sensitive (SVG).\n * Otherwise, returns the lowercase tag name (HTML).\n *\n * @param tagName - Lowercase tag name.\n * @returns - Formatted tag name.\n */\nfunction formatTagName(tagName) {\n  tagName = tagName.toLowerCase();\n  var caseSensitiveTagName = getCaseSensitiveTagName(tagName);\n  if (caseSensitiveTagName) {\n    return caseSensitiveTagName;\n  }\n  return tagName;\n}\n/**\n * Transforms DOM nodes to `domhandler` nodes.\n *\n * @param nodes - DOM nodes.\n * @param parent - Parent node.\n * @param directive - Directive.\n * @returns - Nodes.\n */\nfunction formatDOM(nodes, parent, directive) {\n  if (parent === void 0) {\n    parent = null;\n  }\n  var domNodes = [];\n  var current;\n  var index = 0;\n  var nodesLength = nodes.length;\n  for (; index < nodesLength; index++) {\n    var node = nodes[index];\n    // set the node data given the type\n    switch (node.nodeType) {\n      case 1:\n        {\n          var tagName = formatTagName(node.nodeName);\n          // script, style, or tag\n          current = new domhandler_1.Element(tagName, formatAttributes(node.attributes));\n          current.children = formatDOM(\n          // template children are on content\n          tagName === 'template' ? node.content.childNodes : node.childNodes, current);\n          break;\n        }\n      case 3:\n        current = new domhandler_1.Text(node.nodeValue);\n        break;\n      case 8:\n        current = new domhandler_1.Comment(node.nodeValue);\n        break;\n      default:\n        continue;\n    }\n    // set previous node next\n    var prev = domNodes[index - 1] || null;\n    if (prev) {\n      prev.next = current;\n    }\n    // set properties for current node\n    current.parent = parent;\n    current.prev = prev;\n    current.next = null;\n    domNodes.push(current);\n  }\n  if (directive) {\n    current = new domhandler_1.ProcessingInstruction(directive.substring(0, directive.indexOf(' ')).toLowerCase(), directive);\n    current.next = domNodes[0] || null;\n    current.parent = parent;\n    domNodes.unshift(current);\n    if (domNodes[1]) {\n      domNodes[1].prev = domNodes[0];\n    }\n  }\n  return domNodes;\n}","map":{"version":3,"names":["exports","formatAttributes","formatDOM","domhandler_1","require","constants_1","getCaseSensitiveTagName","tagName","CASE_SENSITIVE_TAG_NAMES_MAP","attributes","map","index","attributesLength","length","attribute","name","value","formatTagName","toLowerCase","caseSensitiveTagName","nodes","parent","directive","domNodes","current","nodesLength","node","nodeType","nodeName","Element","children","content","childNodes","Text","nodeValue","Comment","prev","next","push","ProcessingInstruction","substring","indexOf","unshift"],"sources":["D:\\mydata\\my_projects\\zode\\assignment\\hamid_webApp\\node_modules\\html-dom-parser\\src\\client\\utilities.ts"],"sourcesContent":["import { Comment, Element, ProcessingInstruction, Text } from 'domhandler';\n\nimport { CASE_SENSITIVE_TAG_NAMES_MAP } from './constants';\nimport type { DOMNode } from '../types';\n\n/**\n * Gets case-sensitive tag name.\n *\n * @param tagName - Tag name in lowercase.\n * @returns - Case-sensitive tag name.\n */\nfunction getCaseSensitiveTagName(tagName: string): string | undefined {\n  return CASE_SENSITIVE_TAG_NAMES_MAP[tagName];\n}\n\n/**\n * Formats DOM attributes to a hash map.\n *\n * @param attributes - List of attributes.\n * @returns - Map of attribute name to value.\n */\nexport function formatAttributes(attributes: NamedNodeMap) {\n  const map: Record<string, string> = {};\n  let index = 0;\n  const attributesLength = attributes.length;\n\n  // `NamedNodeMap` is array-like\n  for (; index < attributesLength; index++) {\n    const attribute = attributes[index];\n    map[attribute.name] = attribute.value;\n  }\n\n  return map;\n}\n\n/**\n * Corrects the tag name if it is case-sensitive (SVG).\n * Otherwise, returns the lowercase tag name (HTML).\n *\n * @param tagName - Lowercase tag name.\n * @returns - Formatted tag name.\n */\nfunction formatTagName(tagName: string): string {\n  tagName = tagName.toLowerCase();\n  const caseSensitiveTagName = getCaseSensitiveTagName(tagName);\n\n  if (caseSensitiveTagName) {\n    return caseSensitiveTagName;\n  }\n\n  return tagName;\n}\n\n/**\n * Transforms DOM nodes to `domhandler` nodes.\n *\n * @param nodes - DOM nodes.\n * @param parent - Parent node.\n * @param directive - Directive.\n * @returns - Nodes.\n */\nexport function formatDOM(\n  nodes: NodeList,\n  parent: DOMNode | null = null,\n  directive?: string,\n): DOMNode[] {\n  const domNodes = [];\n  let current;\n  let index = 0;\n  const nodesLength = nodes.length;\n\n  for (; index < nodesLength; index++) {\n    const node = nodes[index];\n\n    // set the node data given the type\n    switch (node.nodeType) {\n      case 1: {\n        const tagName = formatTagName(node.nodeName);\n\n        // script, style, or tag\n        current = new Element(\n          tagName,\n          formatAttributes((node as HTMLElement).attributes),\n        );\n\n        current.children = formatDOM(\n          // template children are on content\n          tagName === 'template'\n            ? (node as HTMLTemplateElement).content.childNodes\n            : node.childNodes,\n          current,\n        );\n\n        break;\n      }\n\n      case 3:\n        current = new Text(node.nodeValue!);\n        break;\n\n      case 8:\n        current = new Comment(node.nodeValue!);\n        break;\n\n      default:\n        continue;\n    }\n\n    // set previous node next\n    const prev = domNodes[index - 1] || null;\n    if (prev) {\n      prev.next = current;\n    }\n\n    // set properties for current node\n    current.parent = parent as Element;\n    current.prev = prev;\n    current.next = null;\n\n    domNodes.push(current);\n  }\n\n  if (directive) {\n    current = new ProcessingInstruction(\n      directive.substring(0, directive.indexOf(' ')).toLowerCase(),\n      directive,\n    );\n\n    current.next = domNodes[0] || null;\n    current.parent = parent as Element;\n    domNodes.unshift(current);\n\n    if (domNodes[1]) {\n      domNodes[1].prev = domNodes[0];\n    }\n  }\n\n  return domNodes;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}